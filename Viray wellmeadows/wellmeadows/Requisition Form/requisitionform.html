<!DOCTYPE html>
<html>
<head>
    <title>Requisition Form</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="stylesheet" href="script.css">

    <!-- Animate css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:700,900" rel="stylesheet"> 
    <style type="script.css">
    </style>
    <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
</head>
<div id="nav">
    <div id="nav1">
        <svg width="106" height="83" viewBox="0 0 106 83" fill="none" xmlns="http://www.w3.org/2000/svg"
            style="transform: translate(0px, 0px);">
            <text x="0" y="35" font-family="Arial" font-size="13" font-weight="bold" fill="currentColor">WELLMEADOWS</text>
            <defs>
                <clipPath id="clip0_2228_162">
                    <rect width="106" height="82.3538" fill="white"></rect>
                </clipPath>
            </defs>
        </svg>
        <svg width="62" height="63" viewBox="0 0 62 63" fill="none" xmlns="http://www.w3.org/2000/svg"
            class="go1438215768" style="transform: translate(0px, 0px);">
            <path
                d="M46.8316 0C42.9105 0 39.1501 1.59236 36.3775 4.42677C33.605 7.26119 32.0474 11.1055 32.0474 15.114C32.0474 19.1224 33.605 22.9667 36.3775 25.8011C39.1501 28.6355 42.9105 30.2279 46.8316 30.2279C50.7526 30.2279 54.513 28.6355 57.2856 25.8011C60.0582 22.9667 61.6158 19.1224 61.6158 15.114C61.6158 11.1055 60.0582 7.26119 57.2856 4.42677C54.513 1.59236 50.7526 0 46.8316 0Z"
                fill="currentColor"></path>
            <path
                d="M14.793 0C10.872 0 7.11154 1.59236 4.33897 4.42677C1.56639 7.26119 0.00878906 11.1055 0.00878906 15.114C0.00878906 19.1224 1.56639 22.9667 4.33897 25.8011C7.11154 28.6355 10.872 30.2279 14.793 30.2279C18.714 30.2279 22.4744 28.6355 25.247 25.8011C28.0196 22.9667 29.5772 19.1224 29.5772 15.114C29.5772 11.1055 28.0196 7.26119 25.247 4.42677C22.4744 1.59236 18.714 0 14.793 0Z"
                fill="currentColor"></path>
            <path d="M36.9805 32.7422L32.0366 37.7963L56.6819 62.9913L61.6258 57.9372L36.9805 32.7422Z"
                fill="currentColor"></path>
            <path d="M56.6836 32.7485L32.0383 57.9435L36.9822 62.9976L61.6275 37.8026L56.6836 32.7485Z"
                fill="currentColor"></path>
            <path d="M4.94386 32.7464L0 37.8005L24.6453 62.9955L29.5892 57.9414L4.94386 32.7464Z"
                fill="currentColor"></path>
            <path d="M24.647 32.7527L0.00170898 57.9477L4.94557 63.0018L29.5909 37.8068L24.647 32.7527Z"
                fill="currentColor"></path>
        </svg>
    </div>
    <div id="nav2">
        <div id="links">
            <a href="/wellmeadows/index.html">Home</a>
            <a href="/wellmeadows/contact/index.html">Contact</a>
            <a href="/wellmeadows/Hospital Appointment Form/index.html">Appointment <i class="ri-arrow-right-up-line"></i></a>
            <a href="#">donate</a>
        </div>  
        <div id="icons">
            <input hidden="" class="check-icon" id="check-icon" name="check-icon" type="checkbox">
        <label class="icon-menu" for="check-icon">
            <div class="bar bar--1"></div>
            <div class="bar bar--2"></div>
            <div class="bar bar--3"></div>
        </label>
        <ul id="list" class="list">
          <a href="/wellmeadows/patient form/index.html">Patient Form</a>
          <a href="/wellmeadows/Requisition Form/requisitionform.html">Requisition</a>
          <a href="/wellmeadows/prescription form/index.html">Prescription</a>
      </ul>
        
            <i class="ri-shopping-cart-line"></i>
            
        </div>
    </div>
</div>
<script>
    // JavaScript to toggle the list visibility
    document.querySelector('.icon-menu').addEventListener('click', function() {
        var list = document.getElementById('list');
        list.classList.toggle('visible');
    });
</script>
<body>

    <div class="container">
        <div class="col-md-9">
            <h1 class="title">Wellmeadow Requisition Form</h1>
        </div>
        
        <form id="requisitionForm" name="requisitionForm" method="post" autocomplete="off">
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="date">Date</label>
                        <input type="date" class="form-control" name="Date">
                    </div>
                </div>
            </div>

            <h5>Requisiter Info</h5>
            <div class="row">    
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="name">Name</label>
                        <input type="text" class="form-control" name="Name" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="itemList">List</label>
                        <select class="custom-select" name="itemList" required>
                            <option>Select One</option>
                            <option>Paracetamol</option>
                            <option>Ibuprofen</option>
                            <option>Amoxicillin</option>
                            <option>Aspirin</option>
                            <option>Ciprofloxacin</option>
                            <option>Metformin</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="ward">Ward</label>
                        <select class="custom-select" name="Ward" required>
                            <option>Select One</option>
                            <option value="inpatient_a">Inpatient A</option>
                            <option value="outpatient_a">Outpatient A</option>
                            <option value="inpatient_b">Inpatient B</option>
                            <option value="outpatient_b">Outpatient B</option>
                            <option value="inpatient_c">Inpatient C</option>
                            <option value="outpatient_c">Outpatient C</option>
                            <option value="inpatient_d">Inpatient D</option>
                            <option value="outpatient_d">Outpatient D</option>
                            <option value="inpatient_e">Inpatient E</option>
                            <option value="outpatient_e">Outpatient E</option>
                            <option value="inpatient_f">Inpatient F</option>
                            <option value="outpatient_f">Outpatient F</option>
                            <option value="inpatient_g">Inpatient G</option>
                            <option value="outpatient_g">Outpatient G</option>
                            <option value="inpatient_h">Inpatient H</option>
                            <option value="outpatient_h">Outpatient H</option>
                            <option value="inpatient_i">Inpatient I</option>
                        </select>
                    </div>
                </div>
            </div>

            <h5>Materials Required</h5>
            <div class="table-responsive-md">
                <table class="table table-bordered table-sm" id="materialsTable">
                    <thead>
                        <tr>
                            <th scope="col">ID</th>
                            <th scope="col">Description & Size</th>
                            <th scope="col">Qty</th>
                            <th scope="col">Cost</th>
                            <th scope="col">Total</th>
                            <th scope="col">Delete</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="text" name="ID" readonly></td>
                            <td>
                                <select name="Description" class="custom-select" required>
                                    <option value="">Select One</option>
                                    <option value="Small Box">Small Box</option>
                                    <option value="Medium Box">Medium Box</option>
                                    <option value="Large Box">Large Box</option>
                                    <option value="Small Bottle">Small Bottle</option>
                                    <option value="Medium Bottle">Medium Bottle</option>
                                    <option value="Large Bottle">Large Bottle</option>
                                </select>
                            </td>
                            <td><input type="number" name="Quantity" required></td>
                            <td><input type="number" name="Cost" required></td>
                            <td><input type="number" name="Total" readonly></td>
                            <td><button type="button" class="btn btn-danger btn-sm delete-row">Delete</button></td>
                        </tr>
                    </tbody>
                </table>
                <button type="button" id="addRow" class="btn btn-primary btn-sm">Add Row</button>
            </div>

            <div class="row" style="align-items: center; margin: 30px">
                <div class="col">
                    <input class="btn btn-primary" value="Cancel" type="reset">
                </div>
                <div class="col">
                    <input type="submit" class="btn btn-success" value="Submit">
                </div>
            </div>
        </form>

        <!-- Container to display the submitted data -->
        <div id="submittedData" style="margin-top: 30px;"></div>
    </div>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script>
        // Function to delete a row from the submitted data display
        $(document).on('click', '.delete-submitted-row', function() {
            $(this).closest('tr').remove();
        });

        // Function to add a row
        $('#addRow').on('click', function() {
            let newRow = `<tr>
                            <td><input type="text" name="ID" readonly></td>
                            <td>
                                <select name="Description" class="custom-select" required>
                                    <option value="">Select One</option>
                                    <option value="Small Box">Small Box</option>
                                    <option value="Medium Box">Medium Box</option>
                                    <option value="Large Box">Large Box</option>
                                    <option value="Small Bottle">Small Bottle</option>
                                    <option value="Medium Bottle">Medium Bottle</option>
                                    <option value="Large Bottle">Large Bottle</option>
                                </select>
                            </td>
                            <td><input type="number" name="Quantity" required></td>
                            <td><input type="number" name="Cost" required></td>
                            <td><input type="number" name="Total" readonly></td>
                            <td><button type="button" class="btn btn-danger btn-sm delete-row">Delete</button></td>
                        </tr>`;
            $('#materialsTable tbody').append(newRow);
            setUniqueIDs(); // Assign unique IDs to the newly added row
        });
// Function to delete a row from the materials table
$(document).on('click', '.delete-row', function() {
            $(this).closest('tr').remove();
            setUniqueIDs(); // Reset IDs after deletion
            recalculateTotal(); // Recalculate totals after deletion
        });
        // Function to set unique IDs for all rows
        function setUniqueIDs() {
            $('#materialsTable tbody tr').each(function(index) {
                $(this).find('input[name="ID"]').val(index + 1); // Unique ID starts from 1
            });
        }

        // Function to calculate total for a row
        function calculateRowTotal(row) {
            const quantity = parseFloat($(row).find('input[name="Quantity"]').val());
            const cost = parseFloat($(row).find('input[name="Cost"]').val());
            const total = quantity * cost;
            $(row).find('input[name="Total"]').val(total.toFixed(2));
        }

        // Function to recalculate totals for all rows
        function recalculateTotal() {
            $('#materialsTable tbody tr').each(function() {
                calculateRowTotal(this);
            });
        }

                // and cost inputs to calculate totals
                $('#materialsTable tbody').on('input', 'input[name="Quantity"], input[name="Cost"]', function() {
            calculateRowTotal($(this).closest('tr'));
        });

        // Initialize unique IDs for existing rows on page load
        setUniqueIDs();

        // Form submission handling
        $('#requisitionForm').on('submit', function(event) {
            event.preventDefault();

            // Get form data
            const formData = new FormData(this);
            const submittedDataDiv = $('#submittedData');

            // Create table to display submitted data
            let tableHTML = '<h5>Submitted Data</h5><table class="table table-bordered"><thead><tr>';
            formData.forEach((value, key) => {
                tableHTML += `<th>${key}</th>`;
            });
            tableHTML += '</tr></thead><tbody><tr>';
            formData.forEach((value) => {
                tableHTML += `<td>${value}</td>`;
            });
            tableHTML += '</tr></tbody></table>';

            // Append the table to the existing submitted data
            submittedDataDiv.append(tableHTML);

            // Clear the form after submission
            $('#requisitionForm')[0].reset();

            // Reset IDs and totals
            setUniqueIDs();
            recalculateTotal();
        });

// Function to delete a row from the submitted data display
$(document).on('click', '.delete-submitted-row', function() {
            $(this).closest('tr').remove();
        });
        
    </script>
    <script src="script.js"></script>
</body>
</html>
